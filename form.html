<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KTH TRINITY Payment 등록</title>
  <style>
    body { font-family: 'Noto Sans KR', sans-serif; background: #fff; margin: 0; padding: 20px; color:#111; }
    h2 { text-align:center; margin-bottom:24px; }
    label { display:block; margin:12px 0 6px; font-weight:600; }
    input, select {
      width:100%; padding:12px; border:1px solid #ccc; border-radius:8px; font-size:15px;
    }
    .row { display:flex; gap:10px; }
    .row input { flex:1; }
    button {
      width:100%; background:#FFD400; color:#111; border:none;
      padding:16px; border-radius:12px; font-weight:700; font-size:17px; margin-top:20px;
    }
  </style>
</head>
<body>
  <h2>KTH TRINITY Payment 등록</h2>

  <form id="paymentForm">
    <label>계약유형</label>
    <select id="type">
      <option>부동산 임대차</option>
      <option>교육비</option>
      <option>서비스 이용료</option>
      <option>기타</option>
    </select>

    <label>이름</label>
    <input type="text" id="name" placeholder="송금자명" required>

    <label>상대방 은행정보</label>
    <input type="text" id="account" placeholder="예: Kasikorn Bank 123-456-7890" required>

    <label>결제금액</label>
    <div class="row">
      <input type="number" id="krw" placeholder="₩ 원화 금액" oninput="convertToTHB()">
      <input type="number" id="thb" placeholder="฿ 바트 금액" oninput="convertToKRW()">
    </div>

    <label>확인서류 (선택)</label>
    <input type="file" id="file">

    <button type="submit">등록하기</button>
  </form>

  <script>
    const rate = 38; // 고정환율

    function convertToTHB() {
      const krw = document.getElementById('krw').value;
      document.getElementById('thb').value = krw ? (krw / rate).toFixed(2) : '';
    }

    function convertToKRW() {
      const thb = document.getElementById('thb').value;
      document.getElementById('krw').value = thb ? (thb * rate).toFixed(0) : '';
    }

    document.getElementById('paymentForm').addEventListener('submit', function(e){
      e.preventDefault();

      const record = {
        type: document.getElementById('type').value,
        name: document.getElementById('name').value,
        account: document.getElementById('account').value,
        krw: document.getElementById('krw').value,
        thb: document.getElementById('thb').value,
        time: new Date().toLocaleString(),
      };

      // LocalStorage 저장
      const existing = JSON.parse(localStorage.getItem('transactions') || '[]');
      existing.unshift(record);
      localStorage.setItem('transactions', JSON.stringify(existing));

      alert('거래가 등록되었습니다.');
      window.location.href = 'index.html';
    });
  </script>
</body>
</html>
